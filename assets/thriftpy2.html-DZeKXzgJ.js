import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,o as h,c as u,b as t,a as o,w as a,e as c,d as n}from"./app-DhX54nll.js";const k={},d=c('<h1 id="thriftpy2---thrift-rpc-框架的高性能-python-实现" tabindex="-1"><a class="header-anchor" href="#thriftpy2---thrift-rpc-框架的高性能-python-实现"><span>thriftpy2 - Thrift RPC 框架的高性能 Python 实现</span></a></h1><div class="no-link"><p><a href="https://travis-ci.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer"><img src="https://travis-ci.com/Thriftpy/thriftpy2.svg?branch=develop" alt="alt" loading="lazy"></a><br><a href="https://codecov.io/gh/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/codecov/c/github/Thriftpy/thriftpy2.svg" alt="alt" loading="lazy"></a><br><a href="https://pypi.org/project/thriftpy2/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/pypi/dm/thriftpy2.svg" alt="alt" loading="lazy"></a><br><a href="https://pypi.org/project/thriftpy2/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/pypi/v/thriftpy2.svg" alt="alt" loading="lazy"></a><br><a href="https://pypi.org/project/thriftpy2/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/pypi/pyversions/thriftpy2.svg" alt="alt" loading="lazy"></a><br><a href="https://pypi.org/project/thriftpy2/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/pypi/implementation/thriftpy2.svg" alt="alt" loading="lazy"></a></p></div>',2),y={class:"table-of-contents"},f=c(`<h2 id="1-项目简介" tabindex="-1"><a class="header-anchor" href="#1-项目简介"><span>1. 项目简介</span></a></h2><table><thead><tr><th>项目</th><th>信息</th></tr></thead><tbody><tr><td>项目地址</td><td><a href="https://pypi.org/project/thriftpy2/" target="_blank" rel="noopener noreferrer">PyPI</a> | <a href="https://github.com/Thriftpy/thriftpy2" target="_blank" rel="noopener noreferrer">GitHub</a></td></tr><tr><td>官方文档</td><td><a href="https://thriftpy2.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">官方文档</a></td></tr><tr><td>开源协议</td><td>MIT</td></tr><tr><td>Python 版本</td><td>Python 2.7 ~ 3.11</td></tr><tr><td>标签</td><td>RPC、asyncio</td></tr></tbody></table><p>ThriftPy2 是 Thrift RPC 框架的 Python 实现，它是官方 Thrift Python 包的另一个实现，兼容 <code>thriftpy</code>，并且提供了无需编译 <code>.thrift</code> 文件即可直接使用的功能。</p><p>ThriftPy2 的速度比 <code>thriftpy</code> 快许多，这可以从官方的 <a href="https://thriftpy2.readthedocs.io/en/latest/#benchmarks" target="_blank" rel="noopener noreferrer">benchmark</a> 中找到。</p><p>如果你需要使用 ThriftPy2，你需要安装 <code>cython</code> 和 <code>thriftpy2</code>：</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> cython thriftpy2
</code></pre></div><p>由于 ThriftPy2 兼容 <code>thriftpy</code>，所以你可以使用 <code>thriftpy</code> 的方式来使用 ThriftPy2：</p><div class="language-python" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token keyword">import</span> thriftpy2 <span class="token keyword">as</span> thriftpy
</code></pre></div><h2 id="2-快速开始" tabindex="-1"><a class="header-anchor" href="#2-快速开始"><span>2. 快速开始</span></a></h2><p>下面所使用的 Thrift 文件如下：</p><div class="language-go" data-ext="go" data-title="go"><pre class="language-go"><code>service PingPong <span class="token punctuation">{</span>
    <span class="token builtin">string</span> <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>基本示例：</p>`,12),g=t("div",{class:"language-python","data-ext":"py","data-title":"py"},[t("pre",{class:"language-python"},[t("code",null,[t("span",{class:"token keyword"},"import"),n(` thriftpy2
`),t("span",{class:"token keyword"},"from"),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("rpc "),t("span",{class:"token keyword"},"import"),n(` make_server

pingpong_thrift `),t("span",{class:"token operator"},"="),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("load"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"pingpong.thrift"'),t("span",{class:"token punctuation"},","),n(" module_name"),t("span",{class:"token operator"},"="),t("span",{class:"token string"},'"pingpong_thrift"'),t("span",{class:"token punctuation"},")"),n(`

`),t("span",{class:"token keyword"},"class"),n(),t("span",{class:"token class-name"},"Dispatcher"),t("span",{class:"token punctuation"},"("),t("span",{class:"token builtin"},"object"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
    `),t("span",{class:"token keyword"},"def"),n(),t("span",{class:"token function"},"ping"),t("span",{class:"token punctuation"},"("),n("self"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
        `),t("span",{class:"token keyword"},"return"),n(),t("span",{class:"token string"},'"pong"'),n(`

server `),t("span",{class:"token operator"},"="),n(" make_server"),t("span",{class:"token punctuation"},"("),n("pingpong_thrift"),t("span",{class:"token punctuation"},"."),n("PingPong"),t("span",{class:"token punctuation"},","),n(" Dispatcher"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token string"},"'127.0.0.1'"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token number"},"6000"),t("span",{class:"token punctuation"},")"),n(`
server`),t("span",{class:"token punctuation"},"."),n("serve"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),n(`
`)])])],-1),m=t("div",{class:"language-python","data-ext":"py","data-title":"py"},[t("pre",{class:"language-python"},[t("code",null,[t("span",{class:"token keyword"},"import"),n(` thriftpy2
`),t("span",{class:"token keyword"},"from"),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("rpc "),t("span",{class:"token keyword"},"import"),n(` make_client

pingpong_thrift `),t("span",{class:"token operator"},"="),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("load"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"pingpong.thrift"'),t("span",{class:"token punctuation"},","),n(" module_name"),t("span",{class:"token operator"},"="),t("span",{class:"token string"},'"pingpong_thrift"'),t("span",{class:"token punctuation"},")"),n(`

client `),t("span",{class:"token operator"},"="),n(" make_client"),t("span",{class:"token punctuation"},"("),n("pingpong_thrift"),t("span",{class:"token punctuation"},"."),n("PingPong"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token string"},"'127.0.0.1'"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token number"},"6000"),t("span",{class:"token punctuation"},")"),n(`
`),t("span",{class:"token keyword"},"print"),t("span",{class:"token punctuation"},"("),n("client"),t("span",{class:"token punctuation"},"."),n("ping"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),n(`
`)])])],-1),_=t("p",null,[n("同样支持 "),t("code",null,"asyncio"),n("，使用上述 Thrift 文件，我们可以这样写：")],-1),v=t("div",{class:"language-python","data-ext":"py","data-title":"py"},[t("pre",{class:"language-python"},[t("code",null,[t("span",{class:"token keyword"},"import"),n(` asyncio
`),t("span",{class:"token keyword"},"import"),n(` thriftpy2
`),t("span",{class:"token keyword"},"from"),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("rpc "),t("span",{class:"token keyword"},"import"),n(` make_aio_server

echo_thrift `),t("span",{class:"token operator"},"="),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("load"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"echo.thrift"'),t("span",{class:"token punctuation"},","),n(" module_name"),t("span",{class:"token operator"},"="),t("span",{class:"token string"},'"echo_thrift"'),t("span",{class:"token punctuation"},")"),n(`

`),t("span",{class:"token keyword"},"class"),n(),t("span",{class:"token class-name"},"Dispatcher"),t("span",{class:"token punctuation"},"("),t("span",{class:"token builtin"},"object"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
    `),t("span",{class:"token keyword"},"async"),n(),t("span",{class:"token keyword"},"def"),n(),t("span",{class:"token function"},"echo"),t("span",{class:"token punctuation"},"("),n("self"),t("span",{class:"token punctuation"},","),n(" param"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
        `),t("span",{class:"token keyword"},"print"),t("span",{class:"token punctuation"},"("),n("param"),t("span",{class:"token punctuation"},")"),n(`
        `),t("span",{class:"token keyword"},"await"),n(" asyncio"),t("span",{class:"token punctuation"},"."),n("sleep"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"0.1"),t("span",{class:"token punctuation"},")"),n(`
        `),t("span",{class:"token keyword"},"return"),n(` param

`),t("span",{class:"token keyword"},"def"),n(),t("span",{class:"token function"},"main"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
    server `),t("span",{class:"token operator"},"="),n(" make_aio_server"),t("span",{class:"token punctuation"},"("),n(`
        echo_thrift`),t("span",{class:"token punctuation"},"."),n("EchoService"),t("span",{class:"token punctuation"},","),n(" Dispatcher"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token string"},"'127.0.0.1'"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token number"},"6000"),t("span",{class:"token punctuation"},")"),n(`
    server`),t("span",{class:"token punctuation"},"."),n("serve"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),n(`

`),t("span",{class:"token keyword"},"if"),n(" __name__ "),t("span",{class:"token operator"},"=="),n(),t("span",{class:"token string"},"'__main__'"),t("span",{class:"token punctuation"},":"),n(`
    main`),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),n(`
`)])])],-1),b=t("div",{class:"language-python","data-ext":"py","data-title":"py"},[t("pre",{class:"language-python"},[t("code",null,[t("span",{class:"token keyword"},"import"),n(` thriftpy2
`),t("span",{class:"token keyword"},"import"),n(` asyncio
`),t("span",{class:"token keyword"},"from"),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("rpc "),t("span",{class:"token keyword"},"import"),n(` make_aio_client

echo_thrift `),t("span",{class:"token operator"},"="),n(" thriftpy2"),t("span",{class:"token punctuation"},"."),n("load"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"echo.thrift"'),t("span",{class:"token punctuation"},","),n(" module_name"),t("span",{class:"token operator"},"="),t("span",{class:"token string"},'"echo_thrift"'),t("span",{class:"token punctuation"},")"),n(`

`),t("span",{class:"token keyword"},"async"),n(),t("span",{class:"token keyword"},"def"),n(),t("span",{class:"token function"},"request"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},":"),n(`
    client `),t("span",{class:"token operator"},"="),n(),t("span",{class:"token keyword"},"await"),n(" make_aio_client"),t("span",{class:"token punctuation"},"("),n(`
        echo_thrift`),t("span",{class:"token punctuation"},"."),n("EchoService"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token string"},"'127.0.0.1'"),t("span",{class:"token punctuation"},","),n(),t("span",{class:"token number"},"6000"),t("span",{class:"token punctuation"},")"),n(`
    `),t("span",{class:"token keyword"},"print"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"await"),n(" client"),t("span",{class:"token punctuation"},"."),n("echo"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},"'hello, world'"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),n(`
    client`),t("span",{class:"token punctuation"},"."),n("close"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),n(`

`),t("span",{class:"token keyword"},"if"),n(" __name__ "),t("span",{class:"token operator"},"=="),n(),t("span",{class:"token string"},"'__main__'"),t("span",{class:"token punctuation"},":"),n(`
    loop `),t("span",{class:"token operator"},"="),n(" asyncio"),t("span",{class:"token punctuation"},"."),n("get_event_loop"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),n(`
    loop`),t("span",{class:"token punctuation"},"."),n("run_until_complete"),t("span",{class:"token punctuation"},"("),n("request"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),n(`
`)])])],-1);function T(w,P){const p=r("router-link"),i=r("CodeTabs");return h(),u("div",null,[d,t("nav",y,[t("ul",null,[t("li",null,[o(p,{to:"#1-项目简介"},{default:a(()=>[n("1. 项目简介")]),_:1})]),t("li",null,[o(p,{to:"#2-快速开始"},{default:a(()=>[n("2. 快速开始")]),_:1})])])]),f,o(i,{id:"93",data:[{id:"Server"},{id:"Client"}]},{title0:a(({value:s,isActive:e})=>[n("Server")]),title1:a(({value:s,isActive:e})=>[n("Client")]),tab0:a(({value:s,isActive:e})=>[g]),tab1:a(({value:s,isActive:e})=>[m]),_:1}),_,o(i,{id:"104",data:[{id:"Server"},{id:"Client"}]},{title0:a(({value:s,isActive:e})=>[n("Server")]),title1:a(({value:s,isActive:e})=>[n("Client")]),tab0:a(({value:s,isActive:e})=>[v]),tab1:a(({value:s,isActive:e})=>[b]),_:1})])}const z=l(k,[["render",T],["__file","thriftpy2.html.vue"]]),j=JSON.parse('{"path":"/posts/python/packages/rpc/thriftpy2.html","title":"thriftpy2 - Thrift RPC 框架的高性能 Python 实现","lang":"zh-CN","frontmatter":{"description":"thriftpy2 - Thrift RPC 框架的高性能 Python 实现 alt alt alt alt alt alt 1. 项目简介 ThriftPy2 是 Thrift RPC 框架的 Python 实现，它是官方 Thrift Python 包的另一个实现，兼容 thriftpy，并且提供了无需编译 .thrift 文件即可直接使用的功能...","head":[["meta",{"property":"og:url","content":"https://blog.alexsun.top/posts/python/packages/rpc/thriftpy2.html"}],["meta",{"property":"og:site_name","content":"鸭梨"}],["meta",{"property":"og:title","content":"thriftpy2 - Thrift RPC 框架的高性能 Python 实现"}],["meta",{"property":"og:description","content":"thriftpy2 - Thrift RPC 框架的高性能 Python 实现 alt alt alt alt alt alt 1. 项目简介 ThriftPy2 是 Thrift RPC 框架的 Python 实现，它是官方 Thrift Python 包的另一个实现，兼容 thriftpy，并且提供了无需编译 .thrift 文件即可直接使用的功能..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://travis-ci.com/Thriftpy/thriftpy2.svg?branch=develop"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-27T04:16:18.000Z"}],["meta",{"property":"article:author","content":"Alex Sun"}],["meta",{"property":"article:modified_time","content":"2024-05-27T04:16:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"thriftpy2 - Thrift RPC 框架的高性能 Python 实现\\",\\"image\\":[\\"https://travis-ci.com/Thriftpy/thriftpy2.svg?branch=develop\\",\\"https://img.shields.io/codecov/c/github/Thriftpy/thriftpy2.svg\\",\\"https://img.shields.io/pypi/dm/thriftpy2.svg\\",\\"https://img.shields.io/pypi/v/thriftpy2.svg\\",\\"https://img.shields.io/pypi/pyversions/thriftpy2.svg\\",\\"https://img.shields.io/pypi/implementation/thriftpy2.svg\\"],\\"dateModified\\":\\"2024-05-27T04:16:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Alex Sun\\",\\"url\\":\\"https://blog.alexsun.top/\\"}]}"]]},"headers":[{"level":2,"title":"1. 项目简介","slug":"1-项目简介","link":"#1-项目简介","children":[]},{"level":2,"title":"2. 快速开始","slug":"2-快速开始","link":"#2-快速开始","children":[]}],"git":{"createdTime":1716783378000,"updatedTime":1716783378000,"contributors":[{"name":"Sun-ZhenXing","email":"1006925066@qq.com","commits":1}]},"readingTime":{"minutes":1.36,"words":408},"filePathRelative":"posts/python/packages/rpc/thriftpy2.md","localizedDate":"2024年5月27日","excerpt":"\\n<!-- markdownlint-disable MD033 -->\\n<div class=\\"no-link\\">\\n<p><a href=\\"https://travis-ci.com/Thriftpy/thriftpy2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://travis-ci.com/Thriftpy/thriftpy2.svg?branch=develop\\" alt=\\"alt\\" loading=\\"lazy\\"></a><br>\\n<a href=\\"https://codecov.io/gh/Thriftpy/thriftpy2\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://img.shields.io/codecov/c/github/Thriftpy/thriftpy2.svg\\" alt=\\"alt\\" loading=\\"lazy\\"></a><br>\\n<a href=\\"https://pypi.org/project/thriftpy2/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://img.shields.io/pypi/dm/thriftpy2.svg\\" alt=\\"alt\\" loading=\\"lazy\\"></a><br>\\n<a href=\\"https://pypi.org/project/thriftpy2/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://img.shields.io/pypi/v/thriftpy2.svg\\" alt=\\"alt\\" loading=\\"lazy\\"></a><br>\\n<a href=\\"https://pypi.org/project/thriftpy2/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://img.shields.io/pypi/pyversions/thriftpy2.svg\\" alt=\\"alt\\" loading=\\"lazy\\"></a><br>\\n<a href=\\"https://pypi.org/project/thriftpy2/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\"><img src=\\"https://img.shields.io/pypi/implementation/thriftpy2.svg\\" alt=\\"alt\\" loading=\\"lazy\\"></a></p>\\n</div>","autoDesc":true}');export{z as comp,j as data};
