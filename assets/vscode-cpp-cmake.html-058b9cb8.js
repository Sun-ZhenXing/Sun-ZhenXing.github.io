import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as c,c as u,a as r,d as n,b as a,w as t,e as s,f as l}from"./app-1a8aaa02.js";const d={},k=n("p",null,"本文介绍 VS Code 配置 C++ CMake 开发环境的方式。",-1),v={class:"table-of-contents"},m=l('<h2 id="_1-安装后端" tabindex="-1"><a class="header-anchor" href="#_1-安装后端" aria-hidden="true">#</a> 1. 安装后端</h2><h2 id="_1-1-编译后端" tabindex="-1"><a class="header-anchor" href="#_1-1-编译后端" aria-hidden="true">#</a> 1.1 编译后端</h2><p>Linux 和 Mac 可使用系统的编译后端，也可以安装 Clang 等编译套件。</p><p>可选的后端有：</p><ul><li>系统默认</li><li>Clang</li><li>MinGW</li><li>MSVC（仅 Windows）</li></ul><div class="hint-container tip"><p class="hint-container-title">Windows 选择后端</p><p>Windows 推荐使用 MSVC（Microsoft Visual Studio）作为编译后端，因为 MinGW 对 Windows 支持性不完整，许多库无法支持。MSVC 对 Windows 有完整支持。下面主要介绍 Windows 的环境配置，Linux 与 Mac 只需少量配置即可。</p></div><p>安装 MSVC 编译套件：</p>',7),_={href:"https://visualstudio.microsoft.com/zh-hans/downloads/",target:"_blank",rel:"noopener noreferrer"},h=n("li",null,"安装时选择 C/C++ 的支持",-1),b=n("p",null,[s("安装后确保 VS 的工具包在路径上，类似于 "),n("code",null,"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64"),s("。")],-1),C=n("h3",{id:"_1-2-cmake",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-2-cmake","aria-hidden":"true"},"#"),s(" 1.2 CMake")],-1),q={href:"https://cmake.org/",target:"_blank",rel:"noopener noreferrer"},g=l(`<div class="language-bash" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> cmake
</code></pre></div><p>安装结束后测试 CMake 版本，确保较新即可：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>cmake <span class="token parameter variable">--version</span>
<span class="token comment"># cmake version 3.24.1</span>
<span class="token comment"># CMake suite maintained and supported by Kitware (kitware.com/cmake).</span>
</code></pre></div><h2 id="_2-vs-code-配置" tabindex="-1"><a class="header-anchor" href="#_2-vs-code-配置" aria-hidden="true">#</a> 2. VS Code 配置</h2><h3 id="_2-1-安装扩展" tabindex="-1"><a class="header-anchor" href="#_2-1-安装扩展" aria-hidden="true">#</a> 2.1 安装扩展</h3><p>下面的包可能有变动，只需选择官方的版本即可：</p><ol><li>C/C++ 语言包</li><li>C/C++ 扩展包</li><li>CMake 包</li></ol><p>现在已经可以使用 VS Code 创建/调试 CMake 项目了。</p><h3 id="_2-2-配置设置" tabindex="-1"><a class="header-anchor" href="#_2-2-配置设置" aria-hidden="true">#</a> 2.2 配置设置</h3><p><code>.vscode/c_cpp_properties.json</code> 配置文件：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Win32&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;includePath&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;\${default}&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;\${workspaceFolder}/**&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;defines&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;_DEBUG&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;UNICODE&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;_UNICODE&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;windowsSdkVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.0.19044.0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;compilerPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cStandard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c17&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cppStandard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c++17&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;intelliSenseMode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;windows-msvc-x64&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意几个要点：</p><ul><li><code>includePath</code> 为语法检查的 Include，和 <code>CMakeLists.txt</code> 中的 Include 不冲突</li><li><code>windowsSdkVersion</code> 必须是当前 Windows 可用的 SDK 版本</li><li><code>compilerPath</code> 必须在路径（PATH）中</li></ul><h2 id="_3-创建项目" tabindex="-1"><a class="header-anchor" href="#_3-创建项目" aria-hidden="true">#</a> 3. 创建项目</h2><p>新建一个文件夹作为你的项目，并包含 <code>CMakeLists.txt</code>：</p><div class="language-cmake line-numbers-mode" data-ext="cmake"><pre class="language-cmake"><code><span class="token keyword">project</span><span class="token punctuation">(</span>test-cmake<span class="token punctuation">)</span>
<span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.9</span><span class="token punctuation">)</span>

<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_RUNTIME_OUTPUT_DIRECTORY</span> <span class="token punctuation">\${</span><span class="token variable">CMAKE_CURRENT_SOURCE_DIR</span><span class="token punctuation">}</span>/build<span class="token punctuation">)</span>

<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_BUILD_TYPE</span> Release<span class="token punctuation">)</span>

<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD</span> <span class="token number">17</span><span class="token punctuation">)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_STANDARD_REQUIRED</span> <span class="token boolean">ON</span><span class="token punctuation">)</span>
<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_EXTENSIONS</span> <span class="token boolean">OFF</span><span class="token punctuation">)</span>

<span class="token keyword">add_executable</span><span class="token punctuation">(</span><span class="token punctuation">\${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span> src/main.cpp<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>src/main.cpp</code> 是主文件：</p><div class="language-cpp" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Hello, CMake!&quot;</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在状态栏选择：</p><ol><li>CMake: Release</li><li>Visual Studio 2019 Release: amd64</li></ol><p>选择后自动配置，如果没有配置可以使用 VS Code 命令 <code>CMake: Configure</code> 进行配置，点击下面 Build 按钮即可生成目标。</p>`,21);function f(M,x){const e=p("router-link"),o=p("ExternalLinkIcon");return c(),u("div",null,[k,r(" more "),n("nav",v,[n("ul",null,[n("li",null,[a(e,{to:"#_1-安装后端"},{default:t(()=>[s("1. 安装后端")]),_:1})]),n("li",null,[a(e,{to:"#_1-1-编译后端"},{default:t(()=>[s("1.1 编译后端")]),_:1}),n("ul",null,[n("li",null,[a(e,{to:"#_1-2-cmake"},{default:t(()=>[s("1.2 CMake")]),_:1})])])]),n("li",null,[a(e,{to:"#_2-vs-code-配置"},{default:t(()=>[s("2. VS Code 配置")]),_:1}),n("ul",null,[n("li",null,[a(e,{to:"#_2-1-安装扩展"},{default:t(()=>[s("2.1 安装扩展")]),_:1})]),n("li",null,[a(e,{to:"#_2-2-配置设置"},{default:t(()=>[s("2.2 配置设置")]),_:1})])])]),n("li",null,[a(e,{to:"#_3-创建项目"},{default:t(()=>[s("3. 创建项目")]),_:1})])])]),m,n("ol",null,[n("li",null,[n("a",_,[s("下载 Visual Studio"),a(o)]),s("，并安装")]),h]),b,C,n("p",null,[s("安装 "),n("a",q,[s("CMake"),a(o)]),s(" 即可，也可以使用 Python 安装 CMake：")]),g])}const y=i(d,[["render",f],["__file","vscode-cpp-cmake.html.vue"]]);export{y as default};
