import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as k,c as p,b as i,a,w as e,d as s,e as d}from"./app-mQJDQ8JG.js";const r={},o=i("p",null,"Windows 安卓子系统的进阶指南。",-1),g={class:"table-of-contents"},c={class:"hint-container info"},u=i("p",{class:"hint-container-title"},"前言",-1),y=d(`<h2 id="1-安装-google-play-版本的-wsa" tabindex="-1"><a class="header-anchor" href="#1-安装-google-play-版本的-wsa"><span>1. 安装 Google Play 版本的 WSA</span></a></h2><p>如果你不想使用 Amazon Appstore，或者你需要自定义一些配置（如可 Root、安装面具等）可以安装 Google Play 版本的 WSA。</p><p>WSA 的社区维护版本下载：<a href="https://github.com/MustardChef/WSABuilds" target="_blank" rel="noopener noreferrer">MustardChef/WSABuilds</a>。</p><p>甚至可以安装一些极客软件：</p><ul><li>Termux</li><li>Magisk</li><li>SuperSU</li><li>TaiChi</li><li>Xposed</li><li>LSposed</li><li>KernelSU</li><li>Kernel Flasher</li><li>Mono</li></ul><p>甚至能安装其他虚拟化软件（Android 容器和虚拟机），或者使用 Termux 安装其他 Linux 系统，使用自编译的 Linux 内核替换现有内核，运行更多自定义守护进程，甚至运行 Docker 容器。</p><h2 id="2-卸载和备份" tabindex="-1"><a class="header-anchor" href="#2-卸载和备份"><span>2. 卸载和备份</span></a></h2><h3 id="21-卸载" tabindex="-1"><a class="header-anchor" href="#21-卸载"><span>2.1 卸载</span></a></h3><p>如果需要安装其他发行版的 WSA（如官方版本），需要卸载现有版本的 WSA。</p><ol><li>打开 <strong>适用于Android(TM) 的 Windows 子系统</strong></li><li>关闭 WSA：<strong>系统</strong> -&gt; <strong>关闭适用于Android(TM) 的 Windows 子系统</strong> -&gt; <strong>关闭</strong></li><li>右键卸载此应用</li></ol><h3 id="22-备份数据" tabindex="-1"><a class="header-anchor" href="#22-备份数据"><span>2.2 备份数据</span></a></h3><p>如果是更新 Google Play 版本的 WSA，可以直接在安装新版本的 WSA 时选择保留数据。</p><p>用户数据在此文件中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">%LOCALAPPDATA%\\Packages\\MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe\\LocalCache\\userdata.vhdx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>复制此文件夹名称，然后使用 <code>Win + R</code> 打开 <strong>运行</strong>，粘贴回车即可打开此文件夹。</p><h3 id="23-备份-apk-文件" tabindex="-1"><a class="header-anchor" href="#23-备份-apk-文件"><span>2.3 备份 APK 文件</span></a></h3><p>可以使用 Adb 批量备份 APK 文件。</p><p>列出包名：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> package</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>列出 APK 文件路径：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">package_name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>复制文件到电脑上：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">device_path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">host_path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><details class="hint-container details"><summary>批量备份脚本</summary><p>查看哪些包需要备份，通常是没有 <code>android</code> 和 <code>windows</code> 的包名：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> package</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> s/package://g</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /android/d</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /windows/d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Windows 下使用 Linux 工具可以参考 <a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">Git</a> 提供的工具包。</p><p>使用 Git 提供的 <code>bash</code> 支持命令，将下列脚本保存为 <code>wsa-copy-apk.sh</code>，然后在 <code>bash</code> 中运行即可。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">packages</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> packages</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s/ //g&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;android&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;windows&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;google&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> package</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $packages</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;[INFO] Backup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $package</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;now ...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    apk_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pm</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> path</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $package</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/base.apk&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s/ //g&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -z</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$apk_path</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;[INFO] Saving&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $apk_path</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;-&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $package</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.apk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        adb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $apk_path</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $package</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">.apk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;[WARN] Not normal package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $package</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>WSL 2 的提供了一个 <code>bash</code> 命令和 Git 提供的是不兼容的，WSL 2 连接 WSA 较为繁琐。</p></details><h2 id="3-使用-root-权限" tabindex="-1"><a class="header-anchor" href="#3-使用-root-权限"><span>3. 使用 ROOT 权限</span></a></h2><p>可以通过安装 <strong>Root Checker Basic</strong> 来检查 ROOT 权限。如果你已经安装过 <strong>Magisk</strong>，会弹出授权界面，对此应用授权即可。</p><p>在 Termux 中可以通过安装 <code>tsu</code> 来模拟 <code>su</code> 命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> tsu</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后使用 <code>tsu</code> 命令即可获取 ROOT 权限。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tsu</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,30);function b(F,C){const t=l("router-link"),n=l("RouteLink");return k(),p("div",null,[o,i("nav",g,[i("ul",null,[i("li",null,[a(t,{to:"#1-安装-google-play-版本的-wsa"},{default:e(()=>[s("1. 安装 Google Play 版本的 WSA")]),_:1})]),i("li",null,[a(t,{to:"#2-卸载和备份"},{default:e(()=>[s("2. 卸载和备份")]),_:1}),i("ul",null,[i("li",null,[a(t,{to:"#21-卸载"},{default:e(()=>[s("2.1 卸载")]),_:1})]),i("li",null,[a(t,{to:"#22-备份数据"},{default:e(()=>[s("2.2 备份数据")]),_:1})]),i("li",null,[a(t,{to:"#23-备份-apk-文件"},{default:e(()=>[s("2.3 备份 APK 文件")]),_:1})])])]),i("li",null,[a(t,{to:"#3-使用-root-权限"},{default:e(()=>[s("3. 使用 ROOT 权限")]),_:1})])])]),i("div",c,[u,i("p",null,[s("如果没有阅读 "),a(n,{to:"/posts/envs/windows-subsystem-for-android.html"},{default:e(()=>[s("使用 Windows 安卓子系统")]),_:1}),s("，请先阅读此文章。")])]),y])}const v=h(r,[["render",b],["__file","wsa-advanced.html.vue"]]),B=JSON.parse('{"path":"/posts/envs/wsa-advanced.html","title":"WSA 进阶","lang":"zh-CN","frontmatter":{"title":"WSA 进阶","date":"2023-05-15T00:00:00.000Z","category":["环境搭建"],"tag":["WSA"],"description":"Windows 安卓子系统的进阶指南。","head":[["meta",{"property":"og:url","content":"https://blog.alexsun.top/posts/envs/wsa-advanced.html"}],["meta",{"property":"og:site_name","content":"鸭梨"}],["meta",{"property":"og:title","content":"WSA 进阶"}],["meta",{"property":"og:description","content":"Windows 安卓子系统的进阶指南。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-10T08:07:14.000Z"}],["meta",{"property":"article:author","content":"Alex Sun"}],["meta",{"property":"article:tag","content":"WSA"}],["meta",{"property":"article:published_time","content":"2023-05-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-10T08:07:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"WSA 进阶\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-05-15T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-10T08:07:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Alex Sun\\",\\"url\\":\\"https://blog.alexsun.top/\\"}]}"]]},"headers":[{"level":2,"title":"1. 安装 Google Play 版本的 WSA","slug":"1-安装-google-play-版本的-wsa","link":"#1-安装-google-play-版本的-wsa","children":[]},{"level":2,"title":"2. 卸载和备份","slug":"2-卸载和备份","link":"#2-卸载和备份","children":[{"level":3,"title":"2.1 卸载","slug":"21-卸载","link":"#21-卸载","children":[]},{"level":3,"title":"2.2 备份数据","slug":"22-备份数据","link":"#22-备份数据","children":[]},{"level":3,"title":"2.3 备份 APK 文件","slug":"23-备份-apk-文件","link":"#23-备份-apk-文件","children":[]}]},{"level":2,"title":"3. 使用 ROOT 权限","slug":"3-使用-root-权限","link":"#3-使用-root-权限","children":[]}],"git":{"createdTime":1684144080000,"updatedTime":1702195634000,"contributors":[{"name":"Sun-ZhenXing","email":"1006925066@qq.com","commits":3}]},"readingTime":{"minutes":2.12,"words":637},"filePathRelative":"posts/envs/wsa-advanced.md","localizedDate":"2023年5月15日","excerpt":"<p>Windows 安卓子系统的进阶指南。</p>\\n","autoDesc":true}');export{v as comp,B as data};
