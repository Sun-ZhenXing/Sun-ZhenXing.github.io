import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as d,c as k,a as l,e as a,d as n,w as e,f as s,b as t}from"./app-i0NauFxm.js";const u={},h=a("p",null,"Windows 安卓子系统的进阶指南。",-1),g={class:"table-of-contents"},b={class:"hint-container info"},_=a("p",{class:"hint-container-title"},"前言",-1),v=a("h2",{id:"1-安装-google-play-版本的-wsa",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#1-安装-google-play-版本的-wsa","aria-hidden":"true"},"#"),s(" 1. 安装 Google Play 版本的 WSA")],-1),f=a("p",null,"如果你不想使用 Amazon Appstore，或者你需要自定义一些配置（如可 Root、安装面具等）可以安装 Google Play 版本的 WSA。",-1),m={href:"https://github.com/MustardChef/WSABuilds",target:"_blank",rel:"noopener noreferrer"},w=t(`<p>甚至可以安装一些极客软件：</p><ul><li>Termux</li><li>Magisk</li><li>SuperSU</li><li>TaiChi</li><li>Xposed</li><li>LSposed</li><li>KernelSU</li><li>Kernel Flasher</li><li>Mono</li></ul><p>甚至能安装其他虚拟化软件（Android 容器和虚拟机），或者使用 Termux 安装其他 Linux 系统，使用自编译的 Linux 内核替换现有内核，运行更多自定义守护进程，甚至运行 Docker 容器。</p><h2 id="2-卸载和备份" tabindex="-1"><a class="header-anchor" href="#2-卸载和备份" aria-hidden="true">#</a> 2. 卸载和备份</h2><h3 id="21-卸载" tabindex="-1"><a class="header-anchor" href="#21-卸载" aria-hidden="true">#</a> 2.1 卸载</h3><p>如果需要安装其他发行版的 WSA（如官方版本），需要卸载现有版本的 WSA。</p><ol><li>打开 <strong>适用于Android(TM) 的 Windows 子系统</strong></li><li>关闭 WSA：<strong>系统</strong> -&gt; <strong>关闭适用于Android(TM) 的 Windows 子系统</strong> -&gt; <strong>关闭</strong></li><li>右键卸载此应用</li></ol><h3 id="22-备份数据" tabindex="-1"><a class="header-anchor" href="#22-备份数据" aria-hidden="true">#</a> 2.2 备份数据</h3><p>如果是更新 Google Play 版本的 WSA，可以直接在安装新版本的 WSA 时选择保留数据。</p><p>用户数据在此文件中：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>%LOCALAPPDATA%<span class="token punctuation">\\</span>Packages<span class="token punctuation">\\</span>MicrosoftCorporationII.WindowsSubsystemForAndroid_8wekyb3d8bbwe<span class="token punctuation">\\</span>LocalCache<span class="token punctuation">\\</span>userdata.vhdx
</code></pre></div><p>复制此文件夹名称，然后使用 <code>Win + R</code> 打开 <strong>运行</strong>，粘贴回车即可打开此文件夹。</p><h3 id="23-备份-apk-文件" tabindex="-1"><a class="header-anchor" href="#23-备份-apk-文件" aria-hidden="true">#</a> 2.3 备份 APK 文件</h3><p>可以使用 Adb 批量备份 APK 文件。</p><p>列出包名：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>adb shell pm list package
</code></pre></div><p>列出 APK 文件路径：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>adb shell pm path <span class="token variable">\${package_name}</span>
</code></pre></div><p>复制文件到电脑上：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>adb pull <span class="token variable">\${device_path}</span> <span class="token variable">\${host_path}</span>
</code></pre></div>`,20),A={class:"hint-container details"},x=t(`<summary>批量备份脚本</summary><p>查看哪些包需要备份，通常是没有 <code>android</code> 和 <code>windows</code> 的包名：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>adb shell pm list package <span class="token operator">|</span> <span class="token function">sed</span> s/package://g <span class="token operator">|</span> <span class="token function">sed</span> /android/d <span class="token operator">|</span> <span class="token function">sed</span> /windows/d
</code></pre></div>`,3),q={href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"},W=t(`<p>使用 Git 提供的 <code>bash</code> 支持命令，将下列脚本保存为 <code>wsa-copy-apk.sh</code>，然后在 <code>bash</code> 中运行即可。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">packages</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>adb shell pm list packages <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;:&quot;</span> <span class="token parameter variable">-f</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/ //g&#39;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;android&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;windows&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;google&quot;</span><span class="token variable">)</span></span>

<span class="token keyword">for</span> <span class="token for-or-select variable">package</span> <span class="token keyword">in</span> <span class="token variable">$packages</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;[INFO] Backup&quot;</span> <span class="token variable">$package</span> <span class="token string">&quot;now ...&quot;</span>
    <span class="token assign-left variable">apk_path</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>adb shell pm path $package <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;/base.apk&quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;:&quot;</span> <span class="token parameter variable">-f</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/ //g&#39;</span><span class="token variable">)</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$apk_path</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;[INFO] Saving&quot;</span> <span class="token variable">$apk_path</span> <span class="token string">&quot;-&gt;&quot;</span> <span class="token variable">$package</span>.apk
        adb pull <span class="token variable">$apk_path</span> <span class="token variable">$package</span>.apk
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;[WARN] Not normal package&quot;</span> <span class="token variable">$package</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre></div><p>WSL 2 的提供了一个 <code>bash</code> 命令和 Git 提供的是不兼容的，WSL 2 连接 WSA 较为繁琐。</p>`,3),S=t(`<h2 id="3-使用-root-权限" tabindex="-1"><a class="header-anchor" href="#3-使用-root-权限" aria-hidden="true">#</a> 3. 使用 ROOT 权限</h2><p>可以通过安装 <strong>Root Checker Basic</strong> 来检查 ROOT 权限。如果你已经安装过 <strong>Magisk</strong>，会弹出授权界面，对此应用授权即可。</p><p>在 Termux 中可以通过安装 <code>tsu</code> 来模拟 <code>su</code> 命令：</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>pkg <span class="token function">install</span> tsu
</code></pre></div><p>然后使用 <code>tsu</code> 命令即可获取 ROOT 权限。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>tsu
</code></pre></div>`,6);function y($,L){const o=p("router-link"),r=p("RouterLink"),c=p("ExternalLinkIcon");return d(),k("div",null,[h,l(" more "),a("nav",g,[a("ul",null,[a("li",null,[n(o,{to:"#1-安装-google-play-版本的-wsa"},{default:e(()=>[s("1. 安装 Google Play 版本的 WSA")]),_:1})]),a("li",null,[n(o,{to:"#2-卸载和备份"},{default:e(()=>[s("2. 卸载和备份")]),_:1}),a("ul",null,[a("li",null,[n(o,{to:"#21-卸载"},{default:e(()=>[s("2.1 卸载")]),_:1})]),a("li",null,[n(o,{to:"#22-备份数据"},{default:e(()=>[s("2.2 备份数据")]),_:1})]),a("li",null,[n(o,{to:"#23-备份-apk-文件"},{default:e(()=>[s("2.3 备份 APK 文件")]),_:1})])])]),a("li",null,[n(o,{to:"#3-使用-root-权限"},{default:e(()=>[s("3. 使用 ROOT 权限")]),_:1})])])]),a("div",b,[_,a("p",null,[s("如果没有阅读 "),n(r,{to:"/posts/envs/windows-subsystem-for-android.html"},{default:e(()=>[s("使用 Windows 安卓子系统")]),_:1}),s("，请先阅读此文章。")])]),v,f,a("p",null,[s("WSA 的社区维护版本下载："),a("a",m,[s("MustardChef/WSABuilds"),n(c)]),s("。")]),w,a("details",A,[x,a("p",null,[s("Windows 下使用 Linux 工具可以参考 "),a("a",q,[s("Git"),n(c)]),s(" 提供的工具包。")]),W]),S,l(" ## 4. 使用代理或 VPN "),l(" ## 5. WSA 抓包指南 ")])}const O=i(u,[["render",y],["__file","wsa-advanced.html.vue"]]);export{O as default};
