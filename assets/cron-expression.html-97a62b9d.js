import{_ as s,X as i,Y as l,Z as u,a0 as t,$ as e,a2 as r,a1 as o,a3 as a,C as n}from"./framework-4507c9ea.js";const h={},_=t("p",null,"Cron 表达式的用法介绍。",-1),f={class:"table-of-contents"},p=a('<h2 id="_1-cron-表达式" tabindex="-1"><a class="header-anchor" href="#_1-cron-表达式" aria-hidden="true">#</a> 1. Cron 表达式</h2><p>Cron 是一款类 Unix 的操作系统下的基于时间的任务管理系统。用户可以通过 Cron 在固定时间、日期、间隔下，运行定期任务（可以是命令和脚本）。</p><p>Cron 常用于运维和管理，但也可用于其他地方，如：定期下载文件和邮件。Cron 该词来源于希腊语 chronos（χρόνος），原意是时间。<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup></p><p>Cron 使用的语法就是 Cron 表达式。原始的 Cron 表达式是五段的（分、时、日、月、周），但是在 Linux 中，Cron 表达式可以有六段（秒、分、时、日、月、周）。</p><p>后来有一些工具沿用并扩展了 Cron 表达式，现在流行的 Cron 表达式有七段（秒、分、时、日、月、周、年，为了兼容六段的 Cron 表达式，年可以省略），本文将介绍这种 Cron 表达式。</p>',5),q={class:"hint-container info"},C=t("p",{class:"hint-container-title"},"第三方工具",-1),b={href:"https://github.com/quartz-scheduler/quartz",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/Miksus/rocketry",target:"_blank",rel:"noopener noreferrer"},m=a('<h2 id="_2-cron-表达式语法" tabindex="-1"><a class="header-anchor" href="#_2-cron-表达式语法" aria-hidden="true">#</a> 2. Cron 表达式语法</h2><p>Cron 表达式的格式如下：<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup></p><table><thead><tr><th>字段</th><th>允许值</th><th>允许的特殊字符</th></tr></thead><tbody><tr><td>秒</td><td>0-59</td><td><code>, - * /</code></td></tr><tr><td>分</td><td>0-59</td><td><code>, - * /</code></td></tr><tr><td>小时</td><td>0-23</td><td><code>, - * /</code></td></tr><tr><td>日期</td><td>1-31</td><td><code>, - * ? / L W C</code></td></tr><tr><td>月份</td><td>1-12 或 JAN-DEC</td><td><code>, - * /</code></td></tr><tr><td>星期</td><td>1-7 或 SUN-SAT</td><td><code>, - * ? / L C #</code></td></tr><tr><td>年（可为空）</td><td>空或 1970-2099</td><td><code>, - * /</code></td></tr></tbody></table><h3 id="_2-1-基本用法" tabindex="-1"><a class="header-anchor" href="#_2-1-基本用法" aria-hidden="true">#</a> 2.1. 基本用法</h3><p>下面以秒为例，介绍最基本的 Cron 表达式用法。</p><ul><li>允许值范围：0~59，不允许为空值</li><li><code>&quot;*&quot;</code> 代表每秒钟触发一次</li><li><code>&quot;,&quot;</code> 代表在指定的秒数触发，比如 <code>&quot;0,15,45&quot;</code> 代表 0 秒、15 秒和 45 秒时触发任务</li><li><code>&quot;-&quot;</code> 代表在指定的范围内触发，比如 <code>&quot;25-45&quot;</code> 代表从 25 秒开始触发到 45 秒结束触发，每秒触发一次</li><li><code>&quot;/&quot;</code> 代表步进，<code>&quot;/&quot;</code> 前面的值代表初始值（<code>&quot;*&quot;</code> 等同 <code>&quot;0&quot;</code>），后面的值代表偏移量，比如 <code>&quot;0/20&quot;</code> 或者 <code>&quot;*/20&quot;</code> 代表从 0 秒钟开始，每隔 20 秒钟触发一次，即第 0 秒、20 秒、40秒分别触发一次。<code>&quot;10-45/20&quot;</code> 代表在 <code>[10, 45]</code> 内步进 20 秒触发</li></ul><p>由于日期和星期互斥，它们中的一个在指定时，另一个需要指定为 <code>?</code> 来避免冲突。</p><h3 id="_2-2-特殊字符" tabindex="-1"><a class="header-anchor" href="#_2-2-特殊字符" aria-hidden="true">#</a> 2.2. 特殊字符</h3><p>部分字段允许使用特殊字符，其含义如下：</p><ul><li><code>&quot;?&quot;</code> 代表不指定值，可以用于日期和星期字段</li><li><code>&quot;L&quot;</code> 代表最后，可以用于日期和星期字段，比如 <code>&quot;L&quot;</code> 代表最后一天，<code>&quot;6L&quot;</code> 代表最后一个星期五</li><li><code>&quot;W&quot;</code> 代表最近的工作日，可以用于日期字段，比如 <code>&quot;15W&quot;</code> 代表离 15 号最近的工作日</li><li><code>&quot;C&quot;</code> 联系日历计算的值，可以用于日期和星期字段，例如星期域是 <code>&quot;1C&quot;</code> 表示关联日历中第一天</li><li><code>&quot;#&quot;</code> 代表第几个，可以用于星期字段，比如 <code>&quot;6#3&quot;</code> 代表第三个星期五</li></ul><h2 id="_3-cron-表达式示例" tabindex="-1"><a class="header-anchor" href="#_3-cron-表达式示例" aria-hidden="true">#</a> 3. Cron 表达式示例</h2><table><thead><tr><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td><code>0 0 12 * * ?</code></td><td>每天中午 12 点触发</td></tr><tr><td><code>0 15 10 ? * *</code></td><td>每天上午 10:15 触发</td></tr><tr><td><code>0 15 10 * * ?</code></td><td>每天上午 10:15 触发</td></tr><tr><td><code>0 15 10 * * ? *</code></td><td>每天上午 10:15 触发</td></tr><tr><td><code>0 15 10 * * ? 2023</code></td><td>2023 年的每天上午 10:15 触发</td></tr><tr><td><code>0 * 14 * * ?</code></td><td>在每天下午 2 点到下午 2:59 期间的每 1 分钟触发</td></tr><tr><td><code>0 0/5 14 * * ?</code></td><td>在每天下午 2 点到下午 2:55 期间的每 5 分钟触发</td></tr><tr><td><code>0 0/5 14,18 * * ?</code></td><td>在每天下午 2 点到 2:55 期间和下午 6 点到 6:55 期间的每 5 分钟触发</td></tr><tr><td><code>0 0-5 14 * * ?</code></td><td>每天下午 2 点到下午 2:05 期间的每 1 分钟触发</td></tr><tr><td><code>0 10,44 14 ? 3 WED</code></td><td>每年三月的星期三的下午 2:10 和 2:44 触发</td></tr><tr><td><code>0 15 10 ? * MON-FRI</code></td><td>周一至周五的上午 10:15 触发</td></tr><tr><td><code>0 15 10 15 * ?</code></td><td>每月 15 日上午 10:15 触发</td></tr><tr><td><code>0 15 10 L * ?</code></td><td>每月最后一日的上午 10:15 触发</td></tr><tr><td><code>0 15 10 ? * 6L</code></td><td>每月的最后一个星期五上午 10:15 触发</td></tr><tr><td><code>0 15 10 ? * 6L 2022-2025</code></td><td>2022 年至 2025 年的每月的最后一个星期五上午 10:15 触发</td></tr><tr><td><code>0 15 10 ? * 6#3</code></td><td>每月的第三个星期五上午 10:15 触发</td></tr></tbody></table><hr class="footnotes-sep">',13),x={class:"footnotes"},w={class:"footnotes-list"},L={id:"footnote1",class:"footnote-item"},g={href:"https://zh.wikipedia.org/wiki/Cron",target:"_blank",rel:"noopener noreferrer"},N=t("a",{href:"#footnote-ref1",class:"footnote-backref"},"↩︎",-1),y={id:"footnote2",class:"footnote-item"},v={href:"https://www.jianshu.com/p/e9ce1a7e1ed1",target:"_blank",rel:"noopener noreferrer"},E=t("a",{href:"#footnote-ref2",class:"footnote-backref"},"↩︎",-1);function z(V,I){const d=n("router-link"),c=n("ExternalLinkIcon");return i(),l("div",null,[_,u(" more "),t("nav",f,[t("ul",null,[t("li",null,[e(d,{to:"#_1-cron-表达式"},{default:r(()=>[o("1. Cron 表达式")]),_:1})]),t("li",null,[e(d,{to:"#_2-cron-表达式语法"},{default:r(()=>[o("2. Cron 表达式语法")]),_:1}),t("ul",null,[t("li",null,[e(d,{to:"#_2-1-基本用法"},{default:r(()=>[o("2.1. 基本用法")]),_:1})]),t("li",null,[e(d,{to:"#_2-2-特殊字符"},{default:r(()=>[o("2.2. 特殊字符")]),_:1})])])]),t("li",null,[e(d,{to:"#_3-cron-表达式示例"},{default:r(()=>[o("3. Cron 表达式示例")]),_:1})])])]),p,t("div",q,[C,t("p",null,[o("有许多作业调度框架都使用 Cron 表达式，例如 Java 生态的 "),t("a",b,[o("Quartz"),e(c)]),o(" 或者 Python 生态的 "),t("a",k,[o("Rocketry"),e(c)]),o(" 等。另外像 GitHub Actions 这样的 CI 工具也可以使用 Cron 指定其运行周期，这些框架或平台都提供了 Cron 表达式的解析和生成工具，可以方便地使用 Cron 表达式来管理作业。")])]),m,t("section",x,[t("ol",w,[t("li",L,[t("p",null,[o("Cron，维基百科，"),t("a",g,[o("https://zh.wikipedia.org/wiki/Cron"),e(c)]),o(),N])]),t("li",y,[t("p",null,[o("Cron表达式的详细用法，简书，"),t("a",v,[o("https://www.jianshu.com/p/e9ce1a7e1ed1"),e(c)]),o(),E])])])])])}const A=s(h,[["render",z],["__file","cron-expression.html.vue"]]);export{A as default};
