import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o as h,c as r,b as i,a as e,w as a,e as p,d as t}from"./app-mQJDQ8JG.js";const o={},d=i("h1",{id:"2-使用-git-钩子",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#2-使用-git-钩子"},[i("span",null,"2. 使用 Git 钩子")])],-1),k={class:"table-of-contents"},c=p(`<h2 id="1-安装-pre-commit-钩子" tabindex="-1"><a class="header-anchor" href="#1-安装-pre-commit-钩子"><span>1. 安装 pre-commit 钩子</span></a></h2><p><a href="https://pre-commit.com/" target="_blank" rel="noopener noreferrer">pre-commit</a> 是一个 Python 编写的工具，可以在各种项目中管理和维护多个 Git 钩子（除了 Python 项目，各种项目都可以使用）。</p><p>下面安装 <code>pre-commit</code>：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pre-commit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者使用 <code>pipx</code> 安装，这也是推荐的安装方式：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pipx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pre-commit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以使用 Homebrew 安装：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pre-commit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="2-快速开始" tabindex="-1"><a class="header-anchor" href="#2-快速开始"><span>2. 快速开始</span></a></h2><p><code>pre-commit</code> 的使用非常简单，只需要在项目根目录下创建一个 <code>.pre-commit-config.yaml</code> 文件，然后在其中指定需要运行的钩子即可。</p><p>你可以使用 <code>pre-commit sample-config</code> 生成一个基本配置。</p><p>下面示例使用 <code>black</code> 格式化项目代码：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">repos</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">repo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">https://github.com/pre-commit/pre-commit-hooks</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  rev</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">v2.3.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  hooks</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">check-yaml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">end-of-file-fixer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">trailing-whitespace</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">repo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">https://github.com/psf/black</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  rev</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">22.10.0</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">  hooks</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">black</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <a href="https://pre-commit.com/hooks.html" target="_blank" rel="noopener noreferrer">官方文档：hooks</a> 查看所有可用的钩子。</p><p>下面安装钩子：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pre-commit</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在进行任何更改时，都可以运行钩子：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pre-commit</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --all-files</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>还有一些代码格式化工具，如 <a href="https://github.com/astral-sh/ruff" target="_blank" rel="noopener noreferrer"><code>ruff</code></a> 也提供了 <code>pre-commit</code> 钩子 <a href="https://github.com/astral-sh/ruff-pre-commit" target="_blank" rel="noopener noreferrer"><code>ruff-pre-commit</code></a>。</p></blockquote>`,19);function m(g,b){const s=l("router-link");return h(),r("div",null,[d,i("nav",k,[i("ul",null,[i("li",null,[e(s,{to:"#1-安装-pre-commit-钩子"},{default:a(()=>[t("1. 安装 pre-commit 钩子")]),_:1})]),i("li",null,[e(s,{to:"#2-快速开始"},{default:a(()=>[t("2. 快速开始")]),_:1})])])]),c])}const v=n(o,[["render",m],["__file","2.git-hooks.html.vue"]]),f=JSON.parse('{"path":"/posts/python/notebook/engineering/2.git-hooks.html","title":"2. 使用 Git 钩子","lang":"zh-CN","frontmatter":{"description":"2. 使用 Git 钩子 1. 安装 pre-commit 钩子 pre-commit 是一个 Python 编写的工具，可以在各种项目中管理和维护多个 Git 钩子（除了 Python 项目，各种项目都可以使用）。 下面安装 pre-commit： 或者使用 pipx 安装，这也是推荐的安装方式： 可以使用 Homebrew 安装： 2. 快速开始 ...","head":[["meta",{"property":"og:url","content":"https://blog.alexsun.top/posts/python/notebook/engineering/2.git-hooks.html"}],["meta",{"property":"og:site_name","content":"鸭梨"}],["meta",{"property":"og:title","content":"2. 使用 Git 钩子"}],["meta",{"property":"og:description","content":"2. 使用 Git 钩子 1. 安装 pre-commit 钩子 pre-commit 是一个 Python 编写的工具，可以在各种项目中管理和维护多个 Git 钩子（除了 Python 项目，各种项目都可以使用）。 下面安装 pre-commit： 或者使用 pipx 安装，这也是推荐的安装方式： 可以使用 Homebrew 安装： 2. 快速开始 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-27T04:16:18.000Z"}],["meta",{"property":"article:author","content":"Alex Sun"}],["meta",{"property":"article:modified_time","content":"2024-05-27T04:16:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"2. 使用 Git 钩子\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-27T04:16:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Alex Sun\\",\\"url\\":\\"https://blog.alexsun.top/\\"}]}"]]},"headers":[{"level":2,"title":"1. 安装 pre-commit 钩子","slug":"1-安装-pre-commit-钩子","link":"#1-安装-pre-commit-钩子","children":[]},{"level":2,"title":"2. 快速开始","slug":"2-快速开始","link":"#2-快速开始","children":[]}],"git":{"createdTime":1716783378000,"updatedTime":1716783378000,"contributors":[{"name":"Sun-ZhenXing","email":"1006925066@qq.com","commits":1}]},"readingTime":{"minutes":0.99,"words":297},"filePathRelative":"posts/python/notebook/engineering/2.git-hooks.md","localizedDate":"2024年5月27日","excerpt":"\\n\\n<h2>1. 安装 pre-commit 钩子</h2>\\n<p><a href=\\"https://pre-commit.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">pre-commit</a> 是一个 Python 编写的工具，可以在各种项目中管理和维护多个 Git 钩子（除了 Python 项目，各种项目都可以使用）。</p>\\n<p>下面安装 <code>pre-commit</code>：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\">pip</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> install</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\"> pre-commit</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{v as comp,f as data};
