# 4. PySide6 控件

[[TOC]]

## 窗口置顶

@[code python](./src/stay_top.py)

## QButtonGroup

在 Qt Designer 中，选择多个 `RadioButton` 对象右键，选择分配给按钮组，新建按钮组即可创建一个 `QButtonGroup`。

## QToolBar

在 Qt Designer 中，在窗口内右键，选择 **添加工具栏**，即可创建一个 `QToolBar`。为了给 QToolBar 添加工具，可以在动作编辑器中拖拽动作到工具栏中。

## 使用 InputMask 设置字符掩码

`QLineEdit` 有一个属性是 `InputMask`，可以使用 `setInputMask` 进行设置，目的是设置字符掩码，限制用户输入的内容必须符合掩码。[^1]

[^1]: QLineEdit，Qt6，<https://doc.qt.io/qt-6/qlineedit.html#inputMask-prop>

下面是 Qt6 规范：

| 掩码字符 | 含义                                |
| :------: | :---------------------------------- |
|   `A`    | 只能是字母且必须，取值为 `[a-zA-Z]` |
|   `a`    | 同上但不是必须的                    |
|   `N`    | 字母或数字 `[0-9a-zA-Z]`            |
|   `n`    | 同上但不是必须的                    |
|   `X`    | 任何字符                            |
|   `x`    | 同上但不是必须的                    |
|   `9`    | 数字 `[0-9]`                        |
|   `0`    | 同上但不是必须的                    |
|   `D`    | 数字 `[1-9]`                        |
|   `d`    | 同上但不是必须的                    |
|   `#`    | 数字或加减号 `[0-9+-]`，不是必须的  |
|   `H`    | 十六进制字符 `[0-9a-fA-F]`          |
|   `h`    | 同上但不是必须的                    |
|   `B`    | 二进制字符 `[01]`                   |
|   `b`    | 同上但不是必须的                    |

还可以使用元字符用于增强规则：

|  元字符   | 含义                               |
| :-------: | :--------------------------------- |
|    `>`    | 所有字符都被转换为大写             |
|    `<`    | 所有字符都被转换为小写             |
|    `!`    | 关闭大小写转换                     |
|   `;c`    | 终止掩码规则并将空字符设置为 *`c`* |
| `[ ] { }` | 保留内容                           |
|    `\`    | 转义上述掩码字符或元字符           |

总结：

- 掩码字符中，大写为必须输入，小写为可选
- 元字符可以混合使用以便控制输入方式

| 实例                               | 含义                         |
| ---------------------------------- | ---------------------------- |
| `000.000.000.000;_`                | IP 地址，`_` 表示空白        |
| `HH:HH:HH:HH:HH:HH;_`              | MAC 地址                     |
| `0000-00-00`                       | ISO 日期，空白为空格 `' '`   |
| `>AAAAA-AAAAA-AAAAA-AAAAA-AAAAA;#` | 许可证号码，大写，空白为 `#` |

如果我需要设计一个输入 4 字节十六进制数字的输入框，可以使用 `>HH-HH-HH-HH;_` 来表示。

## 创建文件浏览器

可以参考 [`QFileSystemModel`](https://doc.qt.io/qtforpython-6/PySide6/QtWidgets/QFileSystemModel.html) 来了解详细信息。

@[code python](./src/file_explorer.py)

## 简单浏览器

@[code python](./src/simple_brower.py)
